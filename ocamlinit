(* Added by OPAM. *)
let () =
  try Topdirs.dir_directory (Sys.getenv "OCAML_TOPLEVEL_PATH")
  with Not_found -> ()
;;

(* from
   https://github.com/mads379/ocaml-utop-emacs-example/blob/master/.ocamlinit *)

(* Ensure that we're in the root of the project. This is helpful for
   editor integration where the cwd might not be the root of the
   project.*)
let root =
  let rec search path = match Sys.file_exists (path ^ "/.ocamlinit") with
  | false -> search (Filename.dirname path)
  | true -> path
  in search (Sys.getcwd ())
in Sys.chdir root;;

#use "topfind";;
#thread;;

#require "ppx_deriving,sexplib,ppx_sexp_conv";;
#directory "_build";;
