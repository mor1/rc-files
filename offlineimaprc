# Copyright (c) 2015 Richard Mortier <mort@cantab.net>
#
# Permission to use, copy, modify, and distribute this software for any
# purpose with or without fee is hereby granted, provided that the above
# copyright notice and this permission notice appear in all copies.
#
# THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
# WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
# MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
# ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
# WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
# ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
# OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.

[general]
ui = TTYUI
# accounts = Uniks
accounts = Hermes, Docker, Kvasira, Live, Hotmail, VipadiaAlt, Vipadia, Gmail, Gchat
pythonfile = ~/rc-files/offlineimap.py
fsync = false

[DEFAULT]
presynchook = ~/rc-files/offlineimap-presynchook.sh
postsynchook = ~/rc-files/offlineimap-postsynchook.sh
sslcacertfile = /usr/local/etc/openssl/cert.pem
ssl = yes
maxconnections = 1
maxage = 90

#
# Gchat
#

[Account Gchat]
postsynchook = ~/rc-files/offlineimap-postsynchook.sh --index
localrepository = Gchat-Local
remoterepository = Gchat-Remote
labelsheader = X-Keywords
synclabels = yes
ignorelabels = \Important, \Draft

[Repository Gchat-Local]
type = GmailMaildir
localfolders = ~/me/footprint/mail/gmail
nametrans = to_remotefolder
sep = /

[Repository Gchat-Remote]
type = Gmail
readonly = yes
remoteuser = richard.mortier@gmail.com
auth_mechanisms = LOGIN
remotepasseval = get_keychain_pass(
    account="richard.mortier@gmail.com", server="imap.gmail.com")
nametrans = to_localfolder
folderfilter = lambda folder: folder in ['[Google Mail]/Chats']

#
# Gmail
#

[Account Gmail]
localrepository = Gmail-Local
remoterepository = Gmail-Remote
labelsheader = X-Keywords
synclabels = yes
ignorelabels = \Important, \Draft

[Repository Gmail-Local]
type = GmailMaildir
localfolders = ~/me/footprint/mail/gmail
nametrans = to_remotefolder
sep = /

[Repository Gmail-Remote]
type = Gmail
remoteuser = richard.mortier@gmail.com
auth_mechanisms = LOGIN
remotepasseval = get_keychain_pass(
    account="richard.mortier@gmail.com", server="imap.gmail.com")
nametrans = to_localfolder
folderfilter = gmail_is_synced

# do not send deletes from Remote to Local
sync_deletes = no
# do not accept writes to Remote from Local
readonly = true

#
# Vipadia
#

[Account Vipadia]
localrepository = Vipadia-Local
remoterepository = Vipadia-Remote
labelsheader = X-Keywords
synclabels = yes
ignorelabels = \Important, \Draft

[Repository Vipadia-Local]
type = GmailMaildir
localfolders = ~/me/footprint/mail/vipadia
nametrans = to_remotefolder
sep = /

[Repository Vipadia-Remote]
type = Gmail
remoteuser = mort@vipadia.com
auth_mechanisms = LOGIN
remotepasseval = get_keychain_pass(
    account="mort@vipadia.com", server="imap.gmail.com")
nametrans = to_localfolder
folderfilter = gmail_is_synced

#
# Vipadia- alternate account
#

[Account VipadiaAlt]
localrepository = VipadiaAlt-Local
remoterepository = VipadiaAlt-Remote
labelsheader = X-Keywords
synclabels = yes
ignorelabels = \Important, \Draft

[Repository VipadiaAlt-Local]
type = GmailMaildir
localfolders = ~/me/footprint/mail/vipadia-alt
nametrans = to_remotefolder
sep = /

[Repository VipadiaAlt-Remote]
type = Gmail
remoteuser = mort.vipadia
auth_mechanisms = LOGIN
remotepasseval = get_keychain_pass(
    account="mort.vipadia", server="imap.gmail.com")
nametrans = to_localfolder
folderfilter = gmail_is_synced

#
# Hotmail
#

[Account Hotmail]
localrepository = Hotmail-Local
remoterepository = Hotmail-Remote

[Repository Hotmail-Local]
type = Maildir
localfolders = ~/me/footprint/mail/hotmail
nametrans = to_remotefolder
sep = /

[Repository Hotmail-Remote]
type = IMAP
remotehost = imap-mail.outlook.com
remoteuser = richard_mortier@hotmail.com
auth_mechanisms = LOGIN
remotepasseval = get_keychain_pass(
    account="richard_mortier@hotmail.com", server="imap-mail.outlook.com")

#
# Live
#

[Account Live]
localrepository = Live-Local
remoterepository = Live-Remote

[Repository Live-Local]
type = Maildir
localfolders = ~/me/footprint/mail/live
nametrans = to_remotefolder
sep = /

[Repository Live-Remote]
type = IMAP
remotehost = imap-mail.outlook.com
remoteuser = mort@live.co.uk
auth_mechanisms = LOGIN
remotepasseval = get_keychain_pass(
    account="mort@live.co.uk", server="imap-mail.outlook.com")

#
# Uniks
#

[Account Uniks]
localrepository = Uniks-Local
remoterepository = Uniks-Remote
labelsheader = X-Keywords
synclabels = yes
ignorelabels = \Important, \Draft

[Repository Uniks-Local]
type = GmailMaildir
localfolders = ~/me/footprint/mail/uniks
nametrans = to_remotefolder
sep = /

[Repository Uniks-Remote]
type = Gmail
remoteuser = richard.mortier@unikernel.com
auth_mechanisms = LOGIN
remotepasseval = get_keychain_pass(
    account="richard.mortier@unikernel.com", server="imap.gmail.com")
nametrans = to_localfolder
folderfilter = gmail_is_synced

#
# Kvasira
#

[Account Kvasira]
localrepository = Kvasira-Local
remoterepository = Kvasira-Remote
labelsheader = X-Keywords
synclabels = yes
ignorelabels = \Important, \Draft

[Repository Kvasira-Local]
type = GmailMaildir
localfolders = ~/me/footprint/mail/kvasira
nametrans = to_remotefolder
sep = /

[Repository Kvasira-Remote]
type = Gmail
remoteuser = mort@kvasira.com
auth_mechanisms = LOGIN
remotepasseval = get_keychain_pass(
    account="mort@kvasira.com", server="imap.gmail.com")
nametrans = to_localfolder
folderfilter = gmail_is_synced

#
# Docker
#

[Account Docker]
localrepository = Docker-Local
remoterepository = Docker-Remote
labelsheader = X-Keywords
synclabels = yes
ignorelabels = \Important, \Draft

[Repository Docker-Local]
type = GmailMaildir
localfolders = ~/me/footprint/mail/docker
nametrans = to_remotefolder
sep = /

[Repository Docker-Remote]
type = Gmail
remoteuser = richard.mortier@docker.com
auth_mechanisms = LOGIN
remotepasseval = get_keychain_pass(
    account="richard.mortier@docker.com", server="imap.gmail.com")
nametrans = to_localfolder
folderfilter = gmail_is_synced

#
# Hermes
#

[Account Hermes]
localrepository = Hermes-Local
remoterepository = Hermes-Remote

[Repository Hermes-Local]
type = Maildir
localfolders = ~/me/footprint/mail/hermes
sep = /

[Repository Hermes-Remote]
type = IMAP
remotehost = imap.hermes.cam.ac.uk
remoteuser = rmm1002
auth_mechanisms = LOGIN
remotepasseval = get_keychain_pass(
    account="rmm1002@hermes.cam.ac.uk", server="imap.hermes.cam.ac.uk")
folderfilter = hermes_is_synced

# do not send deletes from Remote to Local
sync_deletes = no

# do not accept writes to Remote from Local
readonly = true
